:root {
  --bg: #0b0b12;
  --panel: #0f1220;
  --accent: #1e90ff;    
  --accent-2: #ff931e;  
  --muted: #9aa4b2;
  --glass: rgba(255,255,255,0.045);
  --border: rgba(255,255,255,0.08);
}

* { box-sizing: border-box; }

body {
  margin: 0;
  background: linear-gradient(180deg, #060611 0%, #0b0b12 100%);
  color: #e8eefb;
  font-family: 'Segoe UI', system-ui, sans-serif;
  height: 100vh;
  height: 100dvh; 
  overflow: hidden;
  font-size: 16px; 
}

.hidden { display: none !important; }

/* DESKTOP LAYOUT */
.app-container { 
  display: grid; 
  grid-template-columns: 280px 1fr 300px; 
  gap: 16px; 
  padding: 16px; 
  height: 100%; 
  transition: 0.3s; 
}
.app-container.zen-active { grid-template-columns: 0 1fr 0; gap: 0; }
.zen-active .sidebar, .zen-active .right-panel { opacity: 0; pointer-events: none; width: 0; padding: 0; overflow: hidden; }

/* PANELS */
.sidebar, .right-panel {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 18px;
  display: flex;
  flex-direction: column;
  gap: 16px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.5);
  overflow-y: auto;
}

.main-area {
  background: linear-gradient(180deg, #071022, #071227);
  border: 1px solid var(--border);
  border-radius: 14px;
  display: flex;
  flex-direction: column;
  position: relative;
  box-shadow: 0 12px 40px rgba(0,0,0,0.6);
  overflow: hidden;
}

/* MOBILE NAV (Hidden on Desktop) */
.mobile-nav { display: none; }

/* BRAND */
.brand { display: flex; align-items: center; gap: 12px; padding-bottom: 12px; border-bottom: 1px dashed var(--border); }
.logo-wrap { width: 50px; height: 50px; background: radial-gradient(circle, #102a55, #050b18); border-radius: 12px; display: flex; align-items: center; justify-content: center; border: 1px solid rgba(30,144,255,0.3); }
.logo-wrap img { width: 32px; height: 32px; }
.brand-text h1 { margin: 0; font-size: 20px; color: var(--accent); letter-spacing: 0.5px; }
.brand-text small { font-size: 12px; color: var(--muted); }

/* WIDGETS & INPUTS */
.wisdom-widget { background: var(--glass); padding: 12px; border-radius: 8px; border-left: 3px solid var(--accent-2); font-size: 14px; font-style: italic; color: #ddd; }
.stats-panel { background: rgba(0,0,0,0.3); padding: 12px; border-radius: 8px; display: flex; flex-direction: column; gap: 6px; font-size: 15px; }
.tool-card { background: var(--glass); padding: 14px; border-radius: 10px; border: 1px solid var(--border); }
.tool-card h3 { margin: 0 0 10px 0; color: var(--accent); font-size: 16px; }

select, input { width: 100%; padding: 12px; background: rgba(0,0,0,0.3); border: 1px solid var(--border); border-radius: 8px; color: white; margin-top: 5px; font-size: 15px; }
button { cursor: pointer; border: none; padding: 12px; border-radius: 8px; background: linear-gradient(90deg, var(--accent), #7bd1ff); color: #02102a; font-weight: 700; transition: 0.2s; font-size: 14px; }
button:hover { filter: brightness(1.1); }
.small-btns { display: flex; gap: 8px; margin-top: 10px; }
.small-btns button { font-size: 13px; padding: 10px; flex: 1; }
.grid-btns { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-top: 5px; }
.grid-btns button { font-size: 13px; padding: 8px; }
.full-btn { width: 100%; margin-top: 8px; }
.danger-btn { background: #ff4757; color: white; width: 100%; margin-top: 12px; }
.icon-btn { background: transparent; color: var(--muted); font-size: 20px; padding: 8px; }

/* CHAT STYLES */
.chat-header { padding: 16px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.2); }
.chat-header h2 { margin: 0; font-size: 18px; color: var(--accent); }

/* âœ… UPDATED: Stacked Status Dots */
.status-stack { display: flex; flex-direction: column; justify-content: center; margin-right: 15px; gap: 3px; }

.status-dot { font-size: 11px; font-weight: 600; display: inline-flex; align-items: center; line-height: 1.1; margin: 0; }
.status-dot.green { color: #2ecc71; text-shadow: 0 0 6px rgba(46, 204, 113, 0.4); }
.status-dot.white { color: #ffffff; opacity: 0.6; }

.chat-box { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 16px; }
.message { max-width: 85%; padding: 14px 18px; border-radius: 14px; line-height: 1.6; font-size: 16px; }
.ai-message { align-self: flex-start; background: linear-gradient(90deg, rgba(30,144,255,0.08), rgba(20,40,80,0.05)); border: 1px solid rgba(30,144,255,0.12); color: #dff0ff; border-bottom-left-radius: 2px; }
.user-message { align-self: flex-end; background: linear-gradient(90deg, rgba(255,147,30,0.18), rgba(14,8,0,0.04)); border: 1px solid rgba(255,147,30,0.15); color: #fff; border-bottom-right-radius: 2px; }
.composer-area { padding: 16px; background: rgba(0,0,0,0.2); border-top: 1px solid var(--border); }
.composer { display: flex; gap: 12px; align-items: center; }
.composer input { border-radius: 24px; padding: 14px 18px; font-size: 16px; }
.send-btn { border-radius: 24px; padding: 12px 24px; font-size: 15px; }

/* SELECTION STYLES */
.msg-check { width: 20px; height: 20px; margin-right: 12px; accent-color: #1e90ff; cursor: pointer; }
.chat-box.select-mode-active .message { border: 1px dashed rgba(255, 255, 255, 0.4); cursor: pointer; }
.chat-box.select-mode-active .message:hover { background: rgba(30, 144, 255, 0.15); }
#selection-toolbar { position: sticky; top: 0; z-index: 999; box-shadow: 0 4px 15px rgba(0,0,0,0.5); font-weight: bold; }

/* ðŸ“± MOBILE TABBED LAYOUT FIX */
@media (max-width: 900px) {
  body { overflow: hidden; } /* Keep app feeling */
  
  .app-container { 
    display: block; /* No more grid */
    padding: 0; 
    height: 100%;
    position: relative;
  }

  /* 3 SECTIONS: Full screen on mobile */
  .sidebar, .main-area, .right-panel {
    position: absolute;
    top: 0; left: 0; width: 100%; 
    height: calc(100% - 60px); /* Leave room for nav */
    border: none;
    border-radius: 0;
    margin: 0;
    padding-bottom: 20px;
    z-index: 10;
    background: var(--bg); /* Opaque bg */
  }

  /* CLASS TO HIDE SECTIONS */
  .mobile-hidden {
    display: none !important;
  }

  /* BOTTOM NAV BAR */
  .mobile-nav {
    display: flex;
    position: fixed;
    bottom: 0; left: 0; width: 100%;
    height: 60px;
    background: #0f1220;
    border-top: 1px solid var(--border);
    z-index: 100;
    justify-content: space-around;
    align-items: center;
  }

  .nav-btn {
    background: none;
    border: none;
    color: var(--muted);
    display: flex;
    flex-direction: column;
    align-items: center;
    font-size: 20px;
    gap: 2px;
  }
  .nav-btn small { font-size: 10px; }
  .nav-btn.active { color: var(--accent); }
  .nav-btn.active span { text-shadow: 0 0 10px rgba(30,144,255,0.5); }
}
